# ๐๏ธ Database Schema - ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุงููุดุฑูุน ูุญุชุงุฌ **4 ุฌุฏุงูู ุฑุฆูุณูุฉ**:

```
users (ุงููุณุชุฎุฏููู) โ ููุฌูุฏ ูุณุจูุงู โ
    โ
    โโโ social_accounts (ุญุณุงุจุงุช ุงูุณูุดูุงู ููุฏูุง)
    โโโ posts (ุงูุจูุณุชุงุช)
    โโโ chat_messages (ูุญุงุฏุซุงุช AI)
```

---

## 1๏ธโฃ ุฌุฏูู users (ููุฌูุฏ ูุณุจูุงู โ)

**ุงููุธููุฉ:** ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏููู ุงููุณุฌููู ูู ุงููููุน

| ุงูุญูู | ุงูููุน | ุงููุงุฆุฏุฉ |
|------|------|---------|
| `id` | UUID | ุฑูู ุชุนุฑููู ูุฑูุฏ ููู ูุณุชุฎุฏู |
| `email` | ูุต | ุงูุฅูููู (ููุฏุฎูู) |
| `name` | ูุต | ุงูุงุณู |
| `password_hash` | ูุต | ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ |
| `created_at` | ุชุงุฑูุฎ | ูุชู ุณุฌู |

---

## 2๏ธโฃ ุฌุฏูู social_accounts (ุฌุฏูุฏ ๐)

**ุงููุธููุฉ:** ุญูุธ ุญุณุงุจุงุช ุงูุณูุดูุงู ููุฏูุง ุงููุฑุจูุทุฉ (Twitter, Facebook, etc.)

| ุงูุญูู | ุงูููุน | ุงููุงุฆุฏุฉ |
|------|------|---------|
| `id` | UUID | ุฑูู ุงูุญุณุงุจ ุงููุฑูุฏ |
| `user_id` | UUID | **ููู ุตุงุญุจ ุงูุญุณุงุจุ** (ุฑุจุท ูุน users) |
| `platform` | ูุต | **ุฃู ููุตุฉุ** (twitter, facebook, linkedin) |
| `access_token` | ูุต | **ุงูููุชุงุญ ูููุดุฑ** (ูุดูุฑ) |
| `access_secret` | ูุต | ููุชุงุญ ุฅุถุงูู ูู Twitter (ูุดูุฑ) |
| `refresh_token` | ูุต | ูุชุฌุฏูุฏ ุงูููุชุงุญ (ูุดูุฑ) |
| `token_expires_at` | ุชุงุฑูุฎ | ูุชู ููุชูู ุงูููุชุงุญ |
| `platform_user_id` | ูุต | ID ุงูุญุณุงุจ ุนูู ุงูููุตุฉ |
| `platform_username` | ูุต | @username ุนูู ุงูููุตุฉ |
| `platform_name` | ูุต | ุงูุงุณู ุงูุธุงูุฑ |
| `platform_avatar` | ูุต | ุฑุงุจุท ุตูุฑุฉ ุงูุญุณุงุจ |
| `is_active` | ูุนู/ูุง | ูู ุงูุญุณุงุจ ูุดุทุ |
| `created_at` | ุชุงุฑูุฎ | ูุชู ุชู ุงูุฑุจุท |

**ูุซุงู:**
```
user_id: "abc123"
platform: "twitter"
platform_username: "@khaledabosaeed"
access_token: "encrypted_key_here"
```

**ุงูุนูุงูุฉ:** ูู ูุณุชุฎุฏู โ ูููู ุนุฏุฉ ุญุณุงุจุงุช ุณูุดูุงู ููุฏูุง

---

## 3๏ธโฃ ุฌุฏูู posts (ุฌุฏูุฏ ๐)

**ุงููุธููุฉ:** ุญูุธ ูู ุงูุจูุณุชุงุช (ุงููุญููุธุฉุ ุงููุฌุฏููุฉุ ุงูููุดูุฑุฉ)

| ุงูุญูู | ุงูููุน | ุงููุงุฆุฏุฉ |
|------|------|---------|
| `id` | UUID | ุฑูู ุงูุจูุณุช ุงููุฑูุฏ |
| `user_id` | UUID | **ููู ูุชุจ ุงูุจูุณุชุ** (ุฑุจุท ูุน users) |
| `content` | ูุต ุทููู | **ูุญุชูู ุงูุจูุณุช ููุณู** |
| `ai_prompt` | ูุต | ุงูุณุคุงู ุงููู ุณุฃูุชู ููู AI (ุงุฎุชูุงุฑู) |
| `platform` | ูุต | **ุนูู ุฃู ููุตุฉุ** (twitter, facebook, etc.) |
| `status` | ูุต | **ุญุงูุฉ ุงูุจูุณุช:** draft (ูุณูุฏุฉ) / scheduled (ูุฌุฏูู) / published (ููุดูุฑ) / failed (ูุดู) |
| `scheduled_at` | ุชุงุฑูุฎ | **ูุชู ููุดุฑุ** (ูู ูุฌุฏูู) |
| `published_at` | ุชุงุฑูุฎ | **ูุชู ููุดุฑ ูุนููุงูุ** |
| `media_urls` | ูุงุฆูุฉ | ุฑูุงุจุท ุงูุตูุฑ/ุงูููุฏูููุงุช ูู ุงูุจูุณุช |
| `hashtags` | ูุงุฆูุฉ | ุงููุงุดุชุงุฌุงุช |
| `platform_post_id` | ูุต | ID ุงูุจูุณุช ุนูู ุงูููุตุฉ (ุจุนุฏ ุงููุดุฑ) |
| `platform_post_url` | ูุต | ุฑุงุจุท ุงูุจูุณุช ุนูู ุงูููุตุฉ |
| `created_at` | ุชุงุฑูุฎ | ูุชู ุชู ุงูุฅูุดุงุก |
| `updated_at` | ุชุงุฑูุฎ | ุขุฎุฑ ุชุนุฏูู |

**ูุซุงู:**
```
content: "ูุฑุญุจุงู ุจุงูุฌููุน! ูุฐุง ุฃูู ุจูุณุช ูู ุชุทุจูููุง ุงูุฌุฏูุฏ ๐"
platform: "twitter"
status: "scheduled"
scheduled_at: "2024-12-25 10:00:00"
```

**ุงูุนูุงูุฉ:** ูู ูุณุชุฎุฏู โ ูููู ุนุฏุฉ ุจูุณุชุงุช

---

## 4๏ธโฃ ุฌุฏูู chat_messages (ุฌุฏูุฏ ๐)

**ุงููุธููุฉ:** ุญูุธ ุงููุญุงุฏุซุงุช ูุน ุงูู AI

| ุงูุญูู | ุงูููุน | ุงููุงุฆุฏุฉ |
|------|------|---------|
| `id` | UUID | ุฑูู ุงูุฑุณุงูุฉ ุงููุฑูุฏ |
| `user_id` | UUID | **ูููู ุงููุญุงุฏุซุฉุ** (ุฑุจุท ูุน users) |
| `role` | ูุต | **ููู ูุชุจ ุงูุฑุณุงูุฉุ** ("user" = ุงููุณุชุฎุฏู / "assistant" = AI) |
| `content` | ูุต ุทููู | **ูุต ุงูุฑุณุงูุฉ** |
| `created_at` | ุชุงุฑูุฎ | ูุชู ุฃูุฑุณูุช |

**ูุซุงู ุงููุญุงุฏุซุฉ:**
```
Message 1:
  role: "user"
  content: "ุงูุชุจ ูู ุจูุณุช ุนู ุงูุฐูุงุก ุงูุงุตุทูุงุนู"

Message 2:
  role: "assistant"
  content: "๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุบูุฑ ุงูุนุงูู..."
```

**ุงูุนูุงูุฉ:** ูู ูุณุชุฎุฏู โ ุนุฏุฉ ุฑุณุงุฆู (ุชุงุฑูุฎ ุงููุญุงุฏุซุงุช)

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู

```
users (ุงููุณุชุฎุฏู ุงููุงุญุฏ)
  โ
  โโโบ social_accounts (ุนุฏุฉ ุญุณุงุจุงุช ุณูุดูุงู ููุฏูุง)
  โ   ูุซุงู: ุญุณุงุจ Twitter + ุญุณุงุจ Facebook
  โ
  โโโบ posts (ุนุฏุฉ ุจูุณุชุงุช)
  โ   ูุซุงู: 10 ุจูุณุชุงุช ูุญููุธุฉุ 5 ูุฌุฏููุฉ
  โ
  โโโบ chat_messages (ุนุฏุฉ ุฑุณุงุฆู)
      ูุซุงู: 50 ุฑุณุงูุฉ ูู ุงููุญุงุฏุซุฉ ูุน AI
```

**ุจุงุฎุชุตุงุฑ:**
- ูุณุชุฎุฏู ูุงุญุฏ โ ุนุฏุฉ ุญุณุงุจุงุช ุณูุดูุงู ููุฏูุง
- ูุณุชุฎุฏู ูุงุญุฏ โ ุนุฏุฉ ุจูุณุชุงุช
- ูุณุชุฎุฏู ูุงุญุฏ โ ุนุฏุฉ ุฑุณุงุฆู

---

## ๐ ููุฎุต ุณุฑูุน

### ุงูุฌุฏุงูู:
1. โ **users** - ุงููุณุชุฎุฏููู (ููุฌูุฏ)
2. ๐ **social_accounts** - ุญุณุงุจุงุช Twitter, Facebook, etc.
3. ๐ **posts** - ุงูุจูุณุชุงุช ูุงููุญุชูู
4. ๐ **chat_messages** - ูุญุงุฏุซุงุช AI

### ุฃูู ุงูุญููู:
- **user_id** ูู ูู ุฌุฏูู โ ูุฑุจุท ุงูุจูุงูุงุช ุจุงููุณุชุฎุฏู
- **status** ูู posts โ ููุนุฑูุฉ ุญุงูุฉ ุงูุจูุณุช
- **access_token** ูู social_accounts โ ูููุดุฑ ุนูู ุงูุญุณุงุจ
- **role** ูู chat_messages โ ูุชูููุฒ ุฑุณุงุฆู ุงููุณุชุฎุฏู ุนู AI

---

## ๐ฏ ููุด ูุญุชุงุฌ ูู ุฌุฏููุ

### social_accounts
**ุงูุณุจุจ:** ุนุดุงู ุชุนุฑู **ุนูู ุฃู ุญุณุงุจ ุชูุดุฑ** ูุชุญูุธ ุงูููุงุชูุญ

### posts
**ุงูุณุจุจ:** ุนุดุงู ุชุญูุธ ุงูุจูุณุชุงุช ู **ุชุชุงุจุน ุญุงูุชูุง** (ูุญููุธุฉุ ูุฌุฏููุฉุ ููุดูุฑุฉุ)

### chat_messages
**ุงูุณุจุจ:** ุนุดุงู **ุงููุณุชุฎุฏู ูุดูู ุชุงุฑูุฎ ุงููุญุงุฏุซุงุช** ูุน AI ููุฑุฌุน ููุง

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ๐ ุงูุฃูุงู:
- ูู ุงูู tokens **ูุดูุฑุฉ** ูู Database
- ูุง ูุญูุธ Passwords ุจุดูู ุนุงุฏู (ููุท hash)

### ๐ ุงูุฑุจุท:
- ูู ุฌุฏูู ูุฑุจูุท ุจู `user_id`
- ูู ุญุฐูุช userุ **ุชูุญุฐู ูู ุจูุงูุงุชู** ุชููุงุฆูุงู

### ๐ ุงูููุฑุณุฉ (Indexes):
- ุนูู `user_id` ูู ูู ุฌุฏูู โ ููุจุญุซ ุงูุณุฑูุน
- ุนูู `status` ูู posts โ ูููุชุฑุฉ ุงูุจูุณุชุงุช

---

**ูู ูููุช ุงูููุฑุฉุ ุนูุฏู ุฃู ุงุณุชูุณุงุฑ ุนู ุฃู ุฌุฏููุ** ๐ค
